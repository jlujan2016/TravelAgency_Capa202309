
<ReorgSpec>
<SpecVersion>18_0_4-174187</SpecVersion>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<ReorgCls>c</ReorgCls>
<ReorgCode>pk</ReorgCode>
<ReorgMsg>Flight needs conversion</ReorgMsg>
<ReorgAction>#</ReorgAction>
<TableAttributes>
<AttrisInTable>
<Attribute>
<AttriId>19</AttriId>
<AttriName>FlightId</AttriName>
<Description>Flight Id</Description>
<TakesValueFrom>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<FromValue>
<Token>.</Token>
<Sp></Sp>
<Attribute>
<AttriId>19</AttriId>
<AttriName>FlightId</AttriName>
<Description>Flight Id</Description></Attribute></FromValue></TakesValueFrom>
<OnPrimaryKey>Yes</OnPrimaryKey>
<AttriType>
<DataType>N</DataType>
<Presicion>4</Presicion>
<Scale>0</Scale>
<Properties>
<Property>
<Name>Autonumber</Name>
<Value>Yes</Value></Property>
<Property>
<Name>Autogenerate</Name>
<Value>No</Value></Property>
<Property>
<Name>AllowNulls</Name>
<Value>No</Value></Property></Properties></AttriType></Attribute>
<Attribute>
<AttriId>25</AttriId>
<AttriName>FlightArrivalAirportId</AttriName>
<Description>Flight Arrival Airport Id</Description>
<TakesValueFrom>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<FromValue>
<Token>.</Token>
<Sp></Sp>
<Attribute>
<AttriId>25</AttriId>
<AttriName>FlightArrivalAirportId</AttriName>
<Description>Flight Arrival Airport Id</Description></Attribute></FromValue></TakesValueFrom>
<AttriType>
<DataType>N</DataType>
<Presicion>4</Presicion>
<Scale>0</Scale>
<Properties>
<Property>
<Name>Autonumber</Name>
<Value>No</Value></Property>
<Property>
<Name>Autogenerate</Name>
<Value>No</Value></Property>
<Property>
<Name>AllowNulls</Name>
<Value>No</Value></Property></Properties></AttriType></Attribute>
<Attribute>
<AttriId>24</AttriId>
<AttriName>FlightDepartureAirportId</AttriName>
<Description>Flight Departure Airport Id</Description>
<TakesValueFrom>
<FromValue>
<Token>0</Token></FromValue></TakesValueFrom>
<AttriType>
<DataType>N</DataType>
<Presicion>4</Presicion>
<Scale>0</Scale>
<Properties>
<Property>
<Name>Autonumber</Name>
<Value>No</Value></Property>
<Property>
<Name>Autogenerate</Name>
<Value>No</Value></Property>
<Property>
<Name>AllowNulls</Name>
<Value>No</Value></Property></Properties></AttriType>
<AttriChangeType>ni</AttriChangeType></Attribute></AttrisInTable>
<AttrisNoLongerInTable>
<Attribute>
<AttriId>22</AttriId>
<AttriName>FlightDepartureAiportId</AttriName>
<Description>Flight Departure Aiport Id</Description>
<AttriType>
<DataType>N</DataType>
<Presicion>4</Presicion>
<Scale>0</Scale>
<Properties>
<Property>
<Name>Autonumber</Name>
<Value>No</Value></Property>
<Property>
<Name>Autogenerate</Name>
<Value>No</Value></Property>
<Property>
<Name>AllowNulls</Name>
<Value>No</Value></Property></Properties></AttriType>
<AttriChangeType>del</AttriChangeType></Attribute></AttrisNoLongerInTable>
<AttrisInManyTables></AttrisInManyTables></TableAttributes>
<NavigationTree>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description>
<RecordsToRead>many</RecordsToRead>
<KeyAttributes>
<Attribute>
<AttriId>19</AttriId>
<AttriName>FlightId</AttriName>
<Description>Flight Id</Description></Attribute></KeyAttributes>
<Tables></Tables></Table></NavigationTree>
<TablesToUpdate></TablesToUpdate>
<TableIndices>
<Indices>
<Index>
<IndexName>IFLIGHT</IndexName>
<IndexType>u</IndexType>
<IndexAttris>
<Attribute>
<AttriId>19</AttriId>
<AttriName>FlightId</AttriName>
<Description>Flight Id</Description></Attribute></IndexAttris>
<IndexExistance>AlreadyExist</IndexExistance>
<Clustered>Yes</Clustered></Index>
<Index>
<IndexName>IFLIGHT1</IndexName>
<IndexType>d</IndexType>
<IndexAttris>
<Attribute>
<AttriId>25</AttriId>
<AttriName>FlightArrivalAirportId</AttriName>
<Description>Flight Arrival Airport Id</Description></Attribute></IndexAttris>
<IndexExistance>AlreadyExist</IndexExistance>
<Clustered>No</Clustered></Index></Indices>
<NewIndices>
<Index>
<IndexName>IFLIGHT2</IndexName>
<IndexType>d</IndexType>
<IndexAttris>
<Attribute>
<AttriId>24</AttriId>
<AttriName>FlightDepartureAirportId</AttriName>
<Description>Flight Departure Airport Id</Description></Attribute></IndexAttris>
<IndexExistance>AlreadyExist</IndexExistance>
<Clustered>No</Clustered></Index></NewIndices></TableIndices>
<FKConstraints>
<FKConstraint>
<ChangeType>none</ChangeType>
<Table>
<TableId>7</TableId>
<TableName>Airport</TableName>
<Description>Airport</Description></Table>
<Attributes>
<Attribute>
<AttriId>25</AttriId>
<AttriName>FlightArrivalAirportId</AttriName>
<Description>Flight Arrival Airport Id</Description></Attribute></Attributes></FKConstraint>
<FKConstraint>
<ChangeType>new</ChangeType>
<Table>
<TableId>7</TableId>
<TableName>Airport</TableName>
<Description>Airport</Description></Table>
<Attributes>
<Attribute>
<AttriId>24</AttriId>
<AttriName>FlightDepartureAirportId</AttriName>
<Description>Flight Departure Airport Id</Description></Attribute></Attributes></FKConstraint></FKConstraints>
<Statements>
<Statement>CREATE TABLE [GXA0006] ([FlightId] smallint NOT NULL IDENTITY(1,1), [FlightArrivalAirportId] smallint NOT NULL , [FlightDepartureAirportId] smallint NOT NULL ) </Statement>
<Statement>Run conversion program for table Flight</Statement>
<Statement>DROP TABLE [Flight]</Statement>
<Statement>CALL sp_rename('[GXA0006]', 'Flight')</Statement>
<Statement>ALTER TABLE [Flight] ADD PRIMARY KEY([FlightId])</Statement>
<Statement>SET IDENTITY_INSERT [Country] ON</Statement>
<Statement>INSERT INTO [Country] ([CountryId], [CountryName], [CountryLastLine]) SELECT TOP 1 0, ' ', 0 FROM [Flight] WHERE NOT EXISTS (SELECT 1 FROM [Country] WHERE CountryId=0)</Statement>
<Statement>SET IDENTITY_INSERT [Country] OFF</Statement>
<Statement>INSERT INTO [CountryCity] ([CountryId], [CityId], [CityName]) SELECT TOP 1 0, 0, ' ' FROM [Flight] WHERE NOT EXISTS (SELECT 1 FROM [CountryCity] WHERE CountryId=0 AND CityId=0)</Statement>
<Statement>SET IDENTITY_INSERT [Airport] ON</Statement>
<Statement>INSERT INTO [Airport] ([AirportId], [AirportName], [CountryId], [CityId]) SELECT TOP 1 convert(int, 0), ' ', 0, 0 FROM [Flight] WHERE NOT EXISTS (SELECT 1 FROM [Airport] WHERE AirportId=convert(int, 0))</Statement>
<Statement>SET IDENTITY_INSERT [Airport] OFF</Statement>
<Statement>CREATE NONCLUSTERED INDEX [IFLIGHT1] ON [Flight] ([FlightArrivalAirportId] )</Statement>
<Statement>CREATE NONCLUSTERED INDEX [IFLIGHT2] ON [Flight] ([FlightDepartureAirportId] )</Statement>
<Statement>ALTER TABLE [Flight] ADD CONSTRAINT [IFLIGHT2] FOREIGN KEY ([FlightDepartureAirportId]) REFERENCES [Airport] ([AirportId])</Statement>
<Statement>ALTER TABLE [Flight] ADD CONSTRAINT [IFLIGHT1] FOREIGN KEY ([FlightArrivalAirportId]) REFERENCES [Airport] ([AirportId])</Statement></Statements>
<NeedReorganizationProgram>True</NeedReorganizationProgram>
<Warnings>
<Warning>
<MsgCode>rgz0007</MsgCode>
<Message>
<Token>Attribute </Token>
<Attribute>
<AttriId>24</AttriId>
<AttriName>FlightDepartureAirportId</AttriName>
<Description>Flight Departure Airport Id</Description></Attribute>
<Token> does not allow nulls and does not have an Initial Value. An empty default value will be used.</Token></Message></Warning>
<Warning>
<MsgCode>rgo0002</MsgCode>
<Message>
<Token>Table '</Token>
<Table>
<TableId>7</TableId>
<TableName>Airport</TableName>
<Description>Airport</Description></Table>
<Token>' is referenced by table '</Token>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<Token>' and at least one attribute in its foreign key (</Token>
<Attribute>
<AttriId>24</AttriId>
<AttriName>FlightDepartureAirportId</AttriName>
<Description>Flight Departure Airport Id</Description></Attribute>
<Token>) does not allow nulls. A default record will be added if table '</Token>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<Token>' has records and a record with default values does not exist in table '</Token>
<Table>
<TableId>7</TableId>
<TableName>Airport</TableName>
<Description>Airport</Description></Table>
<Token>'.</Token></Message></Warning>
<Warning>
<MsgCode>rgo0003</MsgCode>
<Message>
<Token>Table '</Token>
<Table>
<TableId>5</TableId>
<TableName>CountryCity</TableName>
<Description>City</Description></Table>
<Token>' is referenced by table '</Token>
<Table>
<TableId>7</TableId>
<TableName>Airport</TableName>
<Description>Airport</Description></Table>
<Token>' and at least one attribute in its foreign key (</Token>
<Attribute>
<AttriId>9</AttriId>
<AttriName>CountryId</AttriName>
<Description>Country Id</Description></Attribute>
<Token>, </Token>
<Attribute>
<AttriId>14</AttriId>
<AttriName>CityId</AttriName>
<Description>City Id</Description></Attribute>
<Token>) does not allow nulls. A default record will be added in table '</Token>
<Table>
<TableId>5</TableId>
<TableName>CountryCity</TableName>
<Description>City</Description></Table>
<Token>' if table '</Token>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<Token>' has records and a record with default values does not exist in table '</Token>
<Table>
<TableId>5</TableId>
<TableName>CountryCity</TableName>
<Description>City</Description></Table>
<Token>'.</Token></Message></Warning>
<Warning>
<MsgCode>rgo0003</MsgCode>
<Message>
<Token>Table '</Token>
<Table>
<TableId>3</TableId>
<TableName>Country</TableName>
<Description>Country</Description></Table>
<Token>' is referenced by table '</Token>
<Table>
<TableId>5</TableId>
<TableName>CountryCity</TableName>
<Description>City</Description></Table>
<Token>' and at least one attribute in its foreign key (</Token>
<Attribute>
<AttriId>9</AttriId>
<AttriName>CountryId</AttriName>
<Description>Country Id</Description></Attribute>
<Token>) does not allow nulls. A default record will be added in table '</Token>
<Table>
<TableId>3</TableId>
<TableName>Country</TableName>
<Description>Country</Description></Table>
<Token>' if table '</Token>
<Table>
<TableId>6</TableId>
<TableName>Flight</TableName>
<Description>Flight</Description></Table>
<Token>' has records and a record with default values does not exist in table '</Token>
<Table>
<TableId>3</TableId>
<TableName>Country</TableName>
<Description>Country</Description></Table>
<Token>'.</Token></Message></Warning></Warnings>
<Errors></Errors>
<Information>
<InfoMsg>
<MsgCode>nfo0003</MsgCode>
<Message>
<Token>The reorganization for this table makes the schema not backward compatible.</Token></Message>
<AdditionalInfo>
<Title>The following operations are not backward compatible:</Title>
<Info>
<Token>Add </Token>
<Token>foreign key</Token>
<Token>constraint</Token>
<Token>IFLIGHT2</Token></Info>
<Info>
<Token>Add not null</Token>
<Token>attribute</Token>
<Attribute>
<AttriId>24</AttriId>
<AttriName>FlightDepartureAirportId</AttriName>
<Description>Flight Departure Airport Id</Description></Attribute></Info>
<Info>
<Token>Delete</Token>
<Token>attribute</Token>
<Attribute>
<AttriId>22</AttriId>
<AttriName>FlightDepartureAiportId</AttriName>
<Description>Flight Departure Aiport Id</Description></Attribute></Info></AdditionalInfo></InfoMsg></Information></ReorgSpec>